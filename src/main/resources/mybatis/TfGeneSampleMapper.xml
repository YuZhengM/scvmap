<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.boot.mapper.TfGeneSampleMapper">
    <resultMap id="BaseResultMap" type="com.spring.boot.pojo.TfGeneSample">
        <result column="f_tf" jdbcType="VARCHAR" property="tf"/>
        <result column="f_score_mean" jdbcType="DOUBLE" property="scoreMean"/>
        <result column="f_count" jdbcType="INTEGER" property="count"/>
        <result column="f_gene" jdbcType="VARCHAR" property="gene"/>
        <result column="f_tf_peak" jdbcType="VARCHAR" property="tfPeak"/>
        <result column="f_gene_peak" jdbcType="VARCHAR" property="genePeak"/>
        <result column="f_score" jdbcType="DOUBLE" property="score"/>
    </resultMap>
    <select id="selectByTfListGeneListByScore" resultMap="BaseResultMap">
        SELECT f_tf, f_gene FROM t_tf_gene_${sampleId}
        WHERE f_tf IN
        <foreach collection="tfList" item="tf" open="(" separator="," close=")">
            #{tf}
        </foreach>
        AND f_gene IN
        <foreach collection="geneList" item="gene" open="(" separator="," close=")">
            #{gene}
        </foreach>
        <if test="coScore != null and coScore != 0">
            AND f_score <![CDATA[ >= ]]> #{coScore}
        </if>
        <if test="meanScore != null and meanScore != 0">
            AND f_score_mean <![CDATA[ >= ]]> #{meanScore}
        </if>
    </select>
</mapper>