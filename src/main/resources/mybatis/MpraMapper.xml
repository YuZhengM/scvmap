<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.boot.mapper.MpraMapper">
    <resultMap id="BaseResultMap" type="com.spring.boot.pojo.Mpra">
        <result column="f_chr" jdbcType="VARCHAR" property="chr"/>
        <result column="f_position" jdbcType="VARCHAR" property="position"/>
        <result column="f_ref" jdbcType="VARCHAR" property="ref"/>
        <result column="f_alt" jdbcType="VARCHAR" property="alt"/>
        <result column="f_genome" jdbcType="VARCHAR" property="genome"/>
        <result column="f_rs_id" jdbcType="VARCHAR" property="rsId"/>
        <result column="f_disease" jdbcType="VARCHAR" property="disease"/>
        <result column="f_cell_line" jdbcType="VARCHAR" property="cellLine"/>
        <result column="f_description" jdbcType="VARCHAR" property="description"/>
        <result column="f_log2_fold_change" jdbcType="VARCHAR" property="log2FoldChange"/>
        <result column="f_p_value" jdbcType="VARCHAR" property="pValue"/>
        <result column="f_fdr" jdbcType="VARCHAR" property="fdr"/>
        <result column="f_mpra_study" jdbcType="VARCHAR" property="mpraStudy"/>
    </resultMap>
    <select id="selectByTraitIdAndGenome" resultMap="BaseResultMap">
        SELECT
            t.f_chr,
            t.f_position,
            t.f_ref,
            t.f_alt,
            t.f_genome,
            t.f_rs_id,
            t.f_disease,
            t.f_cell_line,
            t.f_description,
            t.f_log2_fold_change,
            t.f_p_value,
            t.f_fdr,
            t.f_mpra_study
        FROM
            t_mpra t
                JOIN
            t_variant_${genome}_${signalId} v ON t.f_rs_id = v.f_rs_id
        WHERE t.f_genome = #{genome}
        <include refid="com.spring.boot.order_sql_and_t"/>
    </select>
</mapper>
